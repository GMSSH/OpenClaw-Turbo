# internal - 核心业务代码

本目录包含应用的**私有业务代码**，遵循 Go 语言的 `internal` 包约束——仅限本模块内部引用，外部模块无法导入。

## 分层架构

```
internal/
├── common/     # 通用层 — 常量、枚举、内部工具函数
├── core/       # 基础设施层 — 适配器、核心组件初始化
│   └── adapter/  # 外部服务适配器
├── dto/        # 数据传输层 — 请求/响应结构体定义
├── handler/    # 接入层 — 接收并分发 RPC 请求
│   └── rpc/      # RPC 服务注册与路由
├── model/      # 数据模型层 — 业务实体、数据库模型
└── service/    # 业务逻辑层 — 核心业务实现
```

## 调用关系

```
handler (接入层)
   ↓  调用
service (业务逻辑层)
   ↓  调用
model (数据模型层)
   ↓  使用
core/adapter (基础设施层)
```

> **规则**: 上层可以调用下层，但下层不可以反向调用上层。`common` 和 `dto` 作为公共定义，可被任意层引用。

## 新增模块指南

当你需要新增一个业务模块时，按以下步骤操作：

1. 在 `dto/` 中定义请求/响应结构体
2. 在 `model/` 中定义数据模型（如需）
3. 在 `service/` 中实现业务逻辑
4. 在 `handler/` 中编写 RPC 处理函数
5. 在 `handler/rpc/server.go` 的 `RegisterHandles` 中注册路由
